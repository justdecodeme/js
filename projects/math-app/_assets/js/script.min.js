var cv=document.getElementById("cv"),cvOuter=document.getElementById("cvOuter");function whichTransitionEvent(){var e,t=document.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}function getElPosition(e){return{left:e.getBoundingClientRect().left,right:e.getBoundingClientRect().top}}function getMousePosition(e,t){var a=getElPosition(t),r={x:0,y:0};return r.x=parseFloat((("touchstart"==e.type||"touchmove"==e.type?e.touches[0].clientX:e.clientX)-a.left).toFixed(2)),r.y=parseFloat((("touchstart"==e.type||"touchmove"==e.type?e.touches[0].clientY:e.clientY)-a.right).toFixed(2)),r}Object.size=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a};var initTools=function(){var e=document.getElementById("toolsUniverse"),t=e.querySelectorAll(".tools-planet"),a=document.getElementById("toolsPlanetSets"),r=document.getElementById("toolsPlanetPens"),i=e.offsetWidth,n=document.getElementById("minimizeToggleBtn"),s=document.getElementById("toolsPlanetSetsBtn"),d=document.getElementById("toolsPlanetPensBtn"),o=currSetType=null;t.forEach(function(e){var t=e.querySelectorAll("#"+e.id+">.tools-satellite.primary"),a=e.querySelector(".tools-satellite:first-child").offsetWidth,r=e.offsetWidth,n=(t.length,(i-a)/2),s=(r-a)/2;t.forEach(function(t,a){var r=a-3,i=Math.round(Math.cos(30*r*(Math.PI/180))*n),d=Math.round(Math.sin(30*r*(Math.PI/180))*n),o=Math.round(i+s),l=Math.round(d+s);if(t.style.left=o+"px",t.style.top=l+"px",t.classList.contains("has-child")){let a=t.dataset.toolGroupType,r=16,i=178;e.querySelectorAll('[data-tool-group-type="'+a+'"].secondary').forEach(function(e,t){let n=t-4.5;switch(a){case"pastel1":n=t+1;break;case"pastel2":n=t+2.7;break;case"stroke":n=t+4.7;break;case"opacity":n=t+6.5;break;case"scale":n=t+6}let d=Math.sin(r*n*(Math.PI/180))*i,o=Math.cos(r*n*(Math.PI/180))*i;e.style.top=(d+s).toString()+"px",e.style.left=(o+s).toString()+"px"})}})}),a.classList.add("active"),s.classList.add("active"),s.classList.add("temp-active");var l=function(e){var t=document.querySelector("#toolsPlanetPens [data-tool-type1].active");t&&(t.classList.remove("active"),initTools.currToolType=null,cv.removeEventListener("mousedown",initDraw.drawStart,!1)),t!=e&&(e.classList.add("active"),initTools.currToolType=e.dataset.toolType1,cv.addEventListener("mousedown",initDraw.drawStart,!1))},c=function(e){var t=document.querySelector("#toolsPlanetPens [data-tool-type2].active");t&&t!=e&&(t.classList.remove("active"),e.classList.add("active")),initDraw.strokeColor=e.dataset.value},u=function(e,t,a,r){if(a)t.classList.contains("show-child")?t.classList.remove("show-child"):(document.querySelector(".has-child.show-child")&&document.querySelector(".has-child.show-child").classList.remove("show-child"),t.classList.add("show-child"));else if(r){var i=document.querySelector('[data-tool-group-type="'+e+'"].primary'),n=document.querySelector('[data-tool-group-type="'+e+'"].secondary.active');switch("pastel"==e.substr(0,6)&&(document.querySelector("[data-tool-type2].primary.active").classList.remove("active"),i.setAttribute("data-tool-type2","pastel"),e="pastel"),n&&n.classList.remove("active"),t.classList.add("active"),i.classList.add("active"),i.classList.remove("show-child"),e){case"opacity":initDraw.strokeOpacity=parseFloat(t.dataset.value);break;case"stroke":initDraw.strokeWidth=parseFloat(t.dataset.value);break;case"pastel":var s=t.querySelector("img").getAttribute("src");i.querySelector("img").setAttribute("src",s),i.setAttribute("data-value",t.dataset.value),initDraw.strokeColor=t.dataset.value}}};return e.addEventListener("click",function(t){var i=t.target,o=i.id,v=i.dataset.toolType1,g=i.dataset.toolType2,p=i.dataset.toolGroupType,h=i.classList.contains("primary"),y=i.classList.contains("secondary"),m=i.dataset.panelBtn;"minimizeToggleBtn"==o?document.querySelector(".tools-planet.active")?(n.classList.add("active"),e.classList.remove("active"),s.classList.remove("active"),d.classList.remove("active"),document.querySelector(".tools-planet.active").classList.add("temp-active"),document.querySelector(".tools-planet.active").classList.remove("active")):(e.classList.add("active"),n.classList.remove("active"),document.querySelector(".tools-toggle .temp-active").classList.add("active"),document.querySelector(".tools-planet.temp-active").classList.add("active"),document.querySelector(".tools-planet.temp-active").classList.remove("temp-active")):"toolsPlanetPensBtn"==o?(s.classList.remove("active"),s.classList.remove("temp-active"),a.classList.remove("active"),d.classList.add("active"),d.classList.add("temp-active"),r.classList.add("active"),e.classList.add("active"),n.classList.remove("active")):"toolsPlanetSetsBtn"==o?(d.classList.remove("active"),d.classList.remove("temp-active"),r.classList.remove("active"),s.classList.add("active"),s.classList.add("temp-active"),a.classList.add("active"),e.classList.add("active"),n.classList.remove("active")):"undo"==o?initDraw.undo():"redo"==o?initDraw.redo():"clear"==o?initDraw.clear():v?l(i):g?c(i):m&&initPanel.toggle(i),p&&u(p,i,h,y)},!1),{currToolType:o,currSetType:currSetType}}(),initDraw=function(){var e,t=document.querySelector('[data-tool-group-type="opacity"].secondary.active'),a=parseFloat(t.dataset.value),r=document.querySelector('[data-tool-group-type="stroke"].secondary.active'),i=null,n=0,s=[],d=[],o=function(t){t.preventDefault();var a,r,n=initTools.currToolType,o=getMousePosition(t,cv);if("pen"==n||"marker"==n)r=(a=document.getElementById(i)).getAttribute("points"),"pen"==n?r+=" "+o.x+","+o.y:"marker"==n&&(r=e.x+","+e.y+" "+o.x+","+o.y),a.setAttribute("points",r);else if("eraser"==n){var c=t.target;c.classList.contains("drawing")&&(d=[],s.push({Elements:[c],Id:c.id,Action:"erase"}),c.remove())}cv.addEventListener("mouseleave",l,!1)},l=function(){null!==i&&null!=document.getElementById(i)&&s.push({Elements:[],Id:i,Action:"draw"}),cv.removeEventListener("mousemove",o,!1),cv.removeEventListener("mouseup",l,!1),cv.removeEventListener("mouseleave",l,!1)};return{undo:function(){if(s.length>0){var e,t=s.pop();switch(t.Action){case"draw":e=document.getElementById(t.Id),t.Elements.push(e),e.parentNode.removeChild(e);break;case"erase":cv.appendChild(t.Elements[0]);break;case"clear":t.Elements.forEach(function(e){cv.appendChild(e),n++})}d.push(t)}},redo:function(){if(d.length>0){var e,t=d.pop();switch(t.Action){case"draw":e=t.Elements[0],cv.appendChild(e);break;case"erase":(e=t.Elements[0]).parentNode.removeChild(e);break;case"clear":t.Elements.forEach(function(e){e.parentNode.removeChild(e)})}s.push(t)}},clear:function(){n=0;var e=document.querySelectorAll(".drawing");d=[],s.push({Elements:e,Id:null,Action:"clear"}),cv.innerHTML=""},strokeOpacity:a,strokeWidth:parseFloat(r.dataset.value),strokeColor:document.querySelector('[data-tool-type2="pastel"].primary.active').dataset.value,drawStart:function(t){t.preventDefault();var a,r=initDraw.strokeOpacity,s=initDraw.strokeColor,d=initDraw.strokeWidth,c=initDraw.strokeWidth+10,u=initTools.currToolType,v=getMousePosition(t,cv);i="shape"+n,"pen"!=u&&"marker"!=u||("pen"==u?a='<polyline class="drawing" id="'+i+'" style="opacity:'+r+";fill:none;stroke-linecap:round;stroke:"+s+";stroke-width:"+d+'" points="'+v.x+","+v.y+'" />':"marker"==u&&(a='<polyline class="drawing" id="'+i+'" style="fill:none;stroke-linecap:round;stroke:rgba(0, 255, 0, .5);stroke-width:'+c+'" points="'+v.x+","+v.y+'" />'),cv.innerHTML+=a),cv.addEventListener("mousemove",o,!1),cv.addEventListener("mouseup",l,!1),n++,e=v}}}(),initElDrag=function(){var e=0,t=0,a=0,r=0,i=dropParent=oldDragParent=null,n=function(e,t){var a=e.querySelectorAll(".drag-area");"add"==t?a.length>0?a.forEach(function(e){e.addEventListener("mousedown",s,!1)}):e.addEventListener("mousedown",s,!1):"remove"==t&&(a.length>0?a.forEach(function(e){e.removeEventListener("mousedown",s,!1)}):e.removeEventListener("mousedown",s,!1))},s=function(a){var r=getMousePosition(a,cv);initElDrag.dragParent=a.target.closest(".draggable");var i=initElDrag.dragParent;a.target.classList.contains("drag-area")&&(cvOuter.classList.add("dragging"),e=r.x,t=r.y,i!=initElDrag.oldDragParent&&(i.style.zIndex=++initElDrag.dragParentzIndex),initElDrag.oldDragParent=initElDrag.dragParent,i.classList.contains("draggable-cubes")&&initCubes.getCoords(),cvOuter.addEventListener("mousemove",d,!1),cvOuter.addEventListener("mouseup",o,!1))},d=function(i){i.preventDefault();var n=getMousePosition(i,cv),s=initElDrag.dragParent;if(a=e-n.x,r=t-n.y,e=n.x,t=n.y,s.style.left=s.offsetLeft-a+"px",s==toolsUniverse){var d=cvOuter.getBoundingClientRect().height-s.getBoundingClientRect().height-s.offsetTop;s.style.bottom=d+r+"px"}else s.style.top=s.offsetTop-r+"px";s.classList.contains("draggable-cubes")&&(initCubes.getShortestDist(),null!=initCubes.shortestDist&&(initCubes.shortestDist<initCubes.snapDist?initCubes.highlight(!0):initCubes.highlight(!1)))},o=function(e){e.preventDefault();var t=initElDrag.dragParent;cvOuter.classList.remove("dragging"),t.classList.contains("draggable-cubes")&&null!=initCubes.shortestDist&&initCubes.shortestDist<initCubes.snapDist&&(initCubes.snap(),initCubes.shortestDist=null),cvOuter.removeEventListener("mousemove",d,!1),cvOuter.removeEventListener("mouseup",o,!1)};return n(toolsUniverse,"add"),{dragParentzIndex:0,dragParent:i,dropParent:dropParent,oldDragParent:oldDragParent,init:n}}(),initSealsDrag=function(){var e,t,a=function(e){e.preventDefault()},r=function(e){e.preventDefault()},i=function(e){e.preventDefault(),cvOuter.classList.add("dropping")},n=function(s){s.preventDefault();var d=s.dataTransfer.getData("sealType"),o=s.dataTransfer.getData("src"),l=s.dataTransfer.getData("width"),c=s.dataTransfer.getData("height");cvOuter.classList.remove("dropping");var u,v=sealTypes[d].max;document.querySelectorAll('[data-seal-type="'+d+'"].dropped-seal').length<v?("cubes"==d?(u=document.createElement("div")).innerHTML=`\n          <div class="cube-outer drag-area" data-index="0" data-seal-type="${d}">\n            <div class="cube"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>\n          </div>\n          <div class="dot dot-top"></div>\n          <div class="dot dot-bottom"></div>\n          <div class="dot dot-left"></div>\n          <div class="dot dot-right"></div>\n        `:((u=document.createElement("img")).src=o,u.width=l,u.height=c,u.classList.add("dropped-seal"),u.classList.add("drag-area"),u.setAttribute("data-seal-type",d)),u.classList.add("draggable-cubes"),u.setAttribute("data-id",++initSealsDrag.draggablesId),u.style.zIndex=++initElDrag.dragParentzIndex,u.style.left=s.offsetX-e+"px",u.style.top=s.offsetY-t+"px",u.classList.add("draggable"),cvOuter.appendChild(u),initSealsDrag.dropElHeight=u.getBoundingClientRect().height,u.addEventListener("dblclick",initCubes.detach,!1),initElDrag.init(u,"add"),cvOuter.removeEventListener("dragenter",a),cvOuter.removeEventListener("dragleave",r),cvOuter.removeEventListener("dragover",i),cvOuter.removeEventListener("drop",n)):alert("You can only place max "+v+" of "+d+" seal type.")};return{dragStart:function(s){e=s.offsetX,t=s.offsetY,s.dataTransfer.setData("src",s.target.src),s.dataTransfer.setData("width",s.target.getBoundingClientRect().width),s.dataTransfer.setData("height",s.target.getBoundingClientRect().height),s.dataTransfer.setData("sealType",s.target.dataset.sealType),cvOuter.addEventListener("dragenter",a,!1),cvOuter.addEventListener("dragleave",r,!1),cvOuter.addEventListener("dragover",i,!1),cvOuter.addEventListener("drop",n,!1)},draggablesId:0,dropElHeight:0}}(),fetchSeals=function(){for(var e in sealTypes){var t=document.querySelector('[data-panel="'+e+'"] .content');if(sealTypes.hasOwnProperty(e))sealTypes[e].values.forEach(a=>{var r=document.createElement("img");r.classList.add("draggable-seal"),r.setAttribute("data-seal-type",e),r.src="./_assets/img/"+a,t.appendChild(r)})}}(),initPanel=function(e){var t=function(e){var a=panelBtn=panelCloseBtn=draggableSeals=null;if(e.type){var r=(a=this.closest(".draggable")).dataset.panel;panelBtn=document.querySelector('[data-panel-btn="'+r+'"]'),panelCloseBtn=this}else{r=e;a=document.querySelector('[data-panel="'+r+'"]'),panelBtn=document.querySelector('[data-panel-btn="'+r+'"]'),panelCloseBtn=a.querySelector(".close-btn")}draggableSeals=a.getElementsByClassName("draggable-seal"),a.classList.remove("active"),panelBtn.classList.remove("active"),panelCloseBtn.removeEventListener("click",t,!1),initElDrag.init(a,"remove");for(var i=0;i<draggableSeals.length;i++)draggableSeals[i].removeEventListener("dragstart",initSealsDrag.dragStart,!1);a.dataset.panelSet&&(currSetType=null)};return{toggle:function(e){var a=e.dataset.panelBtn;if(e.classList.contains("active"))t(a);else{var r=document.querySelector('[data-panel="'+a+'"]'),i=r.querySelector(".close-btn"),n=r.getElementsByClassName("draggable-seal");e.classList.add("active"),r.classList.add("active"),r.style.zIndex=++initElDrag.dragParentzIndex,initElDrag.dragParent=r,initElDrag.oldDragParent=r,i.addEventListener("click",t,!1),initElDrag.init(r,"add");for(var s=0;s<n.length;s++)n[s].addEventListener("dragstart",initSealsDrag.dragStart,!1);r.dataset.panelSet&&(currSetType=r.dataset.panelSet)}}}}(),initCubes=function(e){var t={},a=dragParentTop=shortestDist=snapType=dragParent=dropParent=cubeLimit=cubeOuter=null,r=null,i=function(){var e=whichTransitionEvent();cubeLimit=(snapType,3);var t=dragParent.querySelector("[data-seal-type]").dataset.sealType,r=dragParent.querySelector("img").src,i=dragParent.querySelector("img").width,n=dragParent.querySelector("img").height;if("vertical"==snapType)var s=dropParent.querySelectorAll(".drag-area").length,d=dragParent.querySelectorAll(".drag-area").length;else s=dropParent.querySelectorAll(".cube-outer").length,d=dragParent.querySelectorAll(".cube-outer").length;var o=s+d;if(o<=cubeLimit){if(cubeOuter="","vertical"==snapType){for(var l=0;l<d;l++)cubeOuter+=`\n            <div class="cube-outer drag-area" data-index="${s+l}" data-seal-type="${t}">\n              <div class="cube"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>\n            </div>        \n          `;initElDrag.dropParent.innerHTML+=cubeOuter,dropParent=initElDrag.dropParent}else if("horizontal"==snapType){cubeOuter="";for(var c=0;c<o;c++){cubeOuter+=`<div class="cube-outer drag-area" data-index="${c}" data-seal-type="${t}">`;for(l=0;l<3;l++)cubeOuter+=`<div class="cube"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>`;cubeOuter+="</div>"}cubeOuter+='\n          </div>\n          <div class="dot dot-top"></div>\n          <div class="dot dot-bottom"></div>\n          <div class="dot dot-left"></div>\n          <div class="dot dot-right"></div>     \n        ',initElDrag.dropParent.innerHTML=cubeOuter,dropParent=initElDrag.dropParent,initElDrag.init(dropParent,"add")}if("horizontal"==snapType&&dropParent.classList.add("horizontal"),(o=dropParent.querySelectorAll(".cube-outer").length)==cubeLimit){if("vertical"==snapType){cubeOuter='<div class="cube-outer">';for(l=0;l<3;l++)cubeOuter+=`<div class="cube drag-area" data-index="${l}" data-seal-type="${t}"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>`;cubeOuter+='\n            </div>\n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          ',initElDrag.dropParent.innerHTML=cubeOuter,dropParent=initElDrag.dropParent,dropParent.classList.add("vertical")}else"horizontal"==snapType&&(dropParent=initElDrag.dropParent);console.log("limit reached!!!!!!!!!!")}initElDrag.init(dropParent,"add"),dragParent.remove()}else if(o>cubeLimit){var u=cubeLimit-s,v=d-u;if("vertical"==snapType){cubeOuter='<div class="cube-outer">';for(l=0;l<3;l++)cubeOuter+=`<div class="cube drag-area" data-index="${l}" data-seal-type="${t}"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>`;cubeOuter+='\n          </div>\n          <div class="dot dot-top"></div>\n          <div class="dot dot-bottom"></div>\n          <div class="dot dot-left"></div>\n          <div class="dot dot-right"></div>     \n        ',initElDrag.dropParent.innerHTML=cubeOuter,dropParent=initElDrag.dropParent,dropParent.classList.add("vertical");for(var g=0;g<u;g++)dragParent.querySelector('[data-index="'+(d-1-g)+'"].cube-outer').remove()}else if("horizontal"==snapType){cubeOuter="";for(c=0;c<u;c++){cubeOuter+=`<div class="cube-outer drag-area" data-index="${s+c}" data-seal-type="${t}">`;for(l=0;l<3;l++)cubeOuter+=`<div class="cube"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>`;cubeOuter+="</div>"}if(initElDrag.dropParent.innerHTML+=cubeOuter,dropParent=initElDrag.dropParent,1==v){cubeOuter='<div class="cube-outer">';for(l=0;l<3;l++)cubeOuter+=`<div class="cube drag-area" data-index="${l}" data-seal-type="${t}"><img src="${r}" style="width: ${i}px; height: ${n}px;"></div>\n          `;cubeOuter+='\n            </div> \n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          ',initElDrag.dragParent.innerHTML=cubeOuter,dragParent=initElDrag.dragParent,initElDrag.init(dragParent,"add"),dragParent.classList.remove("horizontal")}else for(g=0;g<u;g++)dragParent.querySelector('[data-index="'+(d-1-g)+'"].cube-outer').remove()}initElDrag.init(dropParent,"add"),dragParent.style.left=a,dragParent.style.top=dragParentTop,initElDrag.init(dragParent,"add"),dragParent.classList.add("cant-snap"),console.log("limit reached!!!!!!!!!!")}dragParent.addEventListener(e,function t(){dragParent.removeEventListener(e,t);dragParent.classList.remove("cant-snap")}),dragParent.classList.remove("highlight"),dropParent.classList.remove("highlight")},n=function(e){if("vertical"==r){var t=e.target,i=parseInt(t.dataset.index),s=(p=dragParent.querySelectorAll(".drag-area").length)-i,d=dragParent.querySelector("[data-seal-type]").dataset.sealType,o=dragParent.querySelector("img").src,l=dragParent.querySelector("img").width,c=dragParent.querySelector("img").height;if(a=dragParent.style.left,dragParentTop=dragParent.style.top,1!=p||dragParent.classList.contains("vertical"))if(i){if(dragParent.classList.contains("vertical")){cubeOuter="";for(u=0;u<i;u++)cubeOuter+=`\n              <div class="cube-outer drag-area" data-index="${u}" data-seal-type="${d}">\n                <div class="cube"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>\n              </div>        \n            `;cubeOuter+='\n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          ',initElDrag.dragParent.innerHTML=cubeOuter,dragParent=initElDrag.dragParent,dragParent.classList.remove("vertical"),initElDrag.init(dragParent,"add"),dragParent.addEventListener("dblclick",n,!1)}else for(var u=i;u<p;u++)dragParent.querySelector('[data-index="'+u+'"]').remove();var v=parseFloat(a),g=parseFloat(dragParentTop)+dragParent.getBoundingClientRect().height+30;(h=document.createElement("div")).classList.add("draggable-cubes"),h.classList.add("draggable"),h.setAttribute("data-id",++initSealsDrag.draggablesId),h.style.left=v+"px",h.style.top=g+"px",h.style.zIndex=++initElDrag.dragParentzIndex,cubeOuter="";for(u=0;u<s;u++)cubeOuter+=`\n          <div class="cube-outer drag-area" data-index="${u}" data-seal-type="${d}">\n            <div class="cube"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>\n          </div>        \n        `;cubeOuter+='\n          <div class="dot dot-top"></div>\n          <div class="dot dot-bottom"></div>\n          <div class="dot dot-left"></div>\n          <div class="dot dot-right"></div>     \n        ',h.innerHTML=cubeOuter,cvOuter.appendChild(h),initElDrag.init(h,"add"),h.addEventListener("dblclick",n,!1)}else console.warn("Can't remove from here!");else dragParent.remove()}else{var p;t=e.target,i=parseInt(t.dataset.index),s=(p=dragParent.querySelectorAll(".drag-area").length)-i,d=dragParent.querySelector("[data-seal-type]").dataset.sealType,o=dragParent.querySelector("img").src,l=dragParent.querySelector("img").width,c=dragParent.querySelector("img").height;if(a=dragParent.style.left,dragParentTop=dragParent.style.top,i){if(1==i){cubeOuter='<div class="cube-outer">';for(u=0;u<3;u++)cubeOuter+=`<div class="cube drag-area" data-index="${u}" data-seal-type="${d}"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>\n          `;cubeOuter+='\n            </div> \n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          ',initElDrag.dragParent.innerHTML=cubeOuter,dragParent=initElDrag.dragParent,initElDrag.init(dragParent,"add"),dragParent.classList.remove("horizontal")}else for(u=i;u<p;u++)dragParent.querySelector('[data-index="'+u+'"]').remove();var h;v=parseFloat(a)+dragParent.getBoundingClientRect().width+30,g=parseFloat(dragParentTop);if((h=document.createElement("div")).classList.add("draggable-cubes"),h.classList.add("draggable"),h.setAttribute("data-id",++initSealsDrag.draggablesId),h.style.left=v+"px",h.style.top=g+"px",h.style.zIndex=++initElDrag.dragParentzIndex,1==s){cubeOuter='<div class="cube-outer">';for(u=0;u<3;u++)cubeOuter+=`<div class="cube drag-area" data-index="${u}" data-seal-type="${d}"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>\n          `;cubeOuter+='\n            </div> \n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          '}else{cubeOuter="";for(var y=0;y<s;y++){cubeOuter+=`<div class="cube-outer drag-area" data-index="${y}" data-seal-type="${d}">`;for(u=0;u<3;u++)cubeOuter+=`<div class="cube"><img src="${o}" style="width: ${l}px; height: ${c}px;"></div>`;cubeOuter+="</div>"}cubeOuter+='\n            <div class="dot dot-top"></div>\n            <div class="dot dot-bottom"></div>\n            <div class="dot dot-left"></div>\n            <div class="dot dot-right"></div>     \n          ',h.classList.add("horizontal")}initElDrag.dropParent=h,h.classList.add("vertical"),h.innerHTML=cubeOuter,cvOuter.appendChild(h),initElDrag.init(h,"add"),h.addEventListener("dblclick",n,!1)}else console.warn("Can't remove from here!")}};return{isSnapping:!1,snapDist:40,shortestDist:shortestDist,getCoords:function(){dragParent=initElDrag.dragParent,snapType=dragParent.classList.contains("vertical")?"horizontal":"vertical",r=dragParent.classList.contains("horizontal")?"horizontal":"vertical",t={};var e=dropDotCoord_1=null,i=document.querySelectorAll(".draggable-cubes");for(let a=0;a<i.length;a++)if(i[a]!=dragParent){"vertical"==snapType?(e=i[a].querySelector(".dot-top").getBoundingClientRect(),dropDotCoord_1=i[a].querySelector(".dot-bottom").getBoundingClientRect()):(e=i[a].querySelector(".dot-left").getBoundingClientRect(),dropDotCoord_1=i[a].querySelector(".dot-right").getBoundingClientRect());var n=i[a].dataset.id,s={0:{x:e.x,y:e.y},1:{x:dropDotCoord_1.x,y:dropDotCoord_1.y}};t[n]=s}a=dragParent.style.left,dragParentTop=dragParent.style.top},getShortestDist:function(){var e=null;({i:0,j:0,id:""}),"vertical"==snapType?(dropDotCoord_0=dragParent.querySelector(".dot-top").getBoundingClientRect(),dropDotCoord_1=dragParent.querySelector(".dot-bottom").getBoundingClientRect()):(dropDotCoord_0=dragParent.querySelector(".dot-left").getBoundingClientRect(),dropDotCoord_1=dragParent.querySelector(".dot-right").getBoundingClientRect());for(var a={0:{x:dropDotCoord_0.x,y:dropDotCoord_0.y},1:{x:dropDotCoord_1.x,y:dropDotCoord_1.y}},r=0;r<1;r++)for(var i in t){var n=0==r?1:0;if(t.hasOwnProperty(i)){var s=a[r].x,d=a[r].y,o=s-t[i][n].x,l=d-t[i][n].y,c=parseFloat(Math.sqrt(o*o+l*l).toFixed(2));(null==e||e>c)&&(e=c,{i:0==r?0:1,j:0==n?0:1,id:i},initCubes.shortestDist=e,dropParent=initElDrag.dropParent=document.querySelector('[data-id="'+i+'"'),"vertical"==snapType&&dropParent.classList.contains("vertical"),"horizontal"==snapType&&(dragParent.classList.contains("vertical")&&dropParent.classList.contains("vertical")||(initCubes.shortestDist=null)))}}},highlight:function(e){e?(dragParent.classList.add("highlight"),dropParent.classList.add("highlight")):(dragParent.classList.remove("highlight"),dropParent.classList.remove("highlight"))},snap:i,snap:i,detach:n,detach:n}}();
//# sourceMappingURL=script.min.js.map
